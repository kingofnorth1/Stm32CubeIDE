/*
 * BMP280.c
 *
 *  Created on: Jun 17, 2024
 *      Author: bzah
 */
#include "BMP280.h"

#define BMP280_ADDRESS 0x76
#define ADDRESS 0x44
#define State 0xF3
#define Reset 0xE0
#define Idr 0xD0
#define temp_xlsb 0xFC
#define temp_lsb 0xFB
#define temp_msb 0xFA

uint8_t message[6];

void BMP280_Init()
{
	void BMP280_RESET();
	uint8_t Send[1] = {temp_msb};
	HAL_I2C_Master_Transmit(&hi2c1, (BMP280_ADDRESS<<1)|0, Send, sizeof(Send), HAL_MAX_DELAY);
}

void BMP280_RESET()
{
	uint8_t Send[1] = {Reset};
	HAL_I2C_Master_Transmit(&hi2c1, (BMP280_ADDRESS<<1)|0, Send, sizeof(Send), HAL_MAX_DELAY);
}

void BMP280_ReadReg(float *Temperture, float *Humidity)
{
	uint32_t data;

	*Temperture = 0.1;
	*Humidity = 0.1;
	HAL_I2C_Master_Receive(&hi2c1, (BMP280_ADDRESS<<1)|1, message, sizeof(message), HAL_MAX_DELAY);
}
